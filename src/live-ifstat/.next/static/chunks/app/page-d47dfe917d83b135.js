(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3014:(e,t,s)=>{Promise.resolve().then(s.bind(s,642))},642:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(5155),r=s(2115),l=s(6472),n=s(5781);let i=(0,r.createContext)({data:{},connectionStatus:"connecting",lastError:null});function o(e){let{children:t}=e,[s,l]=(0,r.useState)({}),[n,o]=(0,r.useState)("connecting"),[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e="/api/ifstat-stream";console.log("Creating shared EventSource connection to:",e),o("connecting");let t=new EventSource(e);return t.onopen=()=>{console.log("Shared EventSource connection opened"),o("connected"),d(null)},t.onmessage=e=>{try{if("heartbeat"===e.type){console.log("Received heartbeat");return}console.log("Received message:",e.data);let t=JSON.parse(e.data);if(console.log("Parsed data:",t),!t.device||"number"!=typeof t.kbIn||"number"!=typeof t.kbOut){console.error("Invalid data format:",t);return}let s=t.device;l(e=>{var a;console.log("Current data for",s,":",(null===(a=e[s])||void 0===a?void 0:a.length)||0,"points");let r=[...e[s]||[],t];return r.length>60&&r.shift(),console.log("Updated data for",s,":",r.length,"points"),{...e,[s]:r}})}catch(e){console.error("Error parsing SSE data:",e),d("Error parsing data: ".concat(e.message))}},t.onerror=e=>{console.error("Shared SSE error:",e),o("error"),d("Connection error occurred"),setTimeout(()=>{console.log("Attempting to reconnect..."),t.readyState===EventSource.CLOSED&&window.location.reload()},5e3)},()=>{console.log("Cleaning up shared EventSource connection"),t.close()}},[]),(0,r.useEffect)(()=>{console.log("Network data updated:",Object.keys(s).map(e=>({device:e,points:s[e].length})))},[s]),(0,a.jsx)(i.Provider,{value:{data:s,connectionStatus:n,lastError:c},children:t})}function c(e){let{isOpen:t,onClose:s,children:r,title:l}=e;return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:s}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg w-[90vw] h-[90vh] p-6 z-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[l&&(0,a.jsx)("h2",{className:"text-xl font-semibold",children:l}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsx)("div",{className:"h-[calc(90vh-100px)] overflow-auto",children:r})]})]}):null}function d(e){let{device:t,label:s,className:n="",isModal:o=!1}=e,x="chartType_".concat(t),m="dataType_".concat(t),u=localStorage.getItem(x)||"line",g=localStorage.getItem(m)||"both",[h,p]=(0,r.useState)(u),[b,y]=(0,r.useState)(g),{data:j,connectionStatus:v,lastError:N}=function(e){var t;let s=(0,r.useContext)(i);if(!s)throw Error("useNetworkData must be used within a NetworkDataProvider");return console.log("[".concat(e,"] Requesting data:"),{available:(null===(t=s.data[e])||void 0===t?void 0:t.length)||0,status:s.connectionStatus,error:s.lastError}),{data:s.data[e]||[],connectionStatus:s.connectionStatus,lastError:s.lastError}}(t);(0,r.useEffect)(()=>{localStorage.setItem(x,h),localStorage.setItem(m,b)},[h,b,x,m]);let f=j.map(e=>.008*e.kbIn),w=j.map(e=>.008*e.kbOut),S=j.map(e=>e.timestamp),E=[];("input"===b||"both"===b)&&E.push({label:"Mb/s In",data:f,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",fill:"line"===h,tension:"line"===h?.3:0}),("output"===b||"both"===b)&&E.push({label:"Mb/s Out",data:w,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",fill:"line"===h,tension:"line"===h?.3:0});let I={labels:S,datasets:E},C=s||t,R={responsive:!0,animation:{duration:0},scales:{x:{display:!0},y:{display:!0,beginAtZero:!0}},plugins:{legend:{position:"top"},title:{display:!0,text:"Live Data for ".concat(C)}}},[A,_]=(0,r.useState)(!1),k=(0,a.jsx)(a.Fragment,{children:"line"===h?(0,a.jsx)(l.N1,{data:I,options:R}):(0,a.jsx)(l.yP,{data:I,options:R})});return o?k:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white p-4 border rounded shadow cursor-pointer hover:shadow-lg transition-shadow ".concat(n),onClick:()=>_(!0),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[C," Throughput"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Status: ",v," ",N&&"(".concat(N,")")]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"border rounded p-1 text-sm text-gray-900",children:[(0,a.jsx)("option",{value:"both",children:"Both"}),(0,a.jsx)("option",{value:"input",children:"Input Only"}),(0,a.jsx)("option",{value:"output",children:"Output Only"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"border rounded p-1 text-sm text-gray-900",children:[(0,a.jsx)("option",{value:"line",children:"Line"}),(0,a.jsx)("option",{value:"bar",children:"Bar"})]})]})]}),k,(0,a.jsxs)("div",{className:"text-sm mt-2 text-gray-800",children:[(0,a.jsxs)("p",{children:["Last ",60," samples in Mb/s"]}),(0,a.jsxs)("p",{children:["Current data points: ",j.length]})]})]}),(0,a.jsx)(c,{isOpen:A,onClose:()=>_(!1),title:"".concat(C," Throughput"),children:(0,a.jsx)(d,{device:t,label:s,isModal:!0,className:"h-full"})})]})}function x(e){let{metric:t}=e,[s,n]=(0,r.useState)([]),i="chartType_".concat(t),o=localStorage.getItem(i)||"line",[c,d]=(0,r.useState)(o);(0,r.useEffect)(()=>{let e=new EventSource("/api/sys-stats");return e.onmessage=e=>{try{let t=JSON.parse(e.data);n(e=>{let s=[...e,t];return s.length>60&&s.shift(),s})}catch(e){console.error("Error parsing SSE data for sys-stats:",e)}},e.onerror=t=>{console.error("SSE error for sys-stats:",t),e.close()},()=>{e.close()}},[]),(0,r.useEffect)(()=>{localStorage.setItem(i,c)},[c,i]);let x=s.map(e=>e.timestamp);if("cpu"===t){let e=s.map(e=>e.cpu),t=s.length>0?s[s.length-1].cpu:0,r={labels:x,datasets:[{label:"CPU Load (%)",data:e,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",fill:"line"===c,tension:"line"===c?.3:0}]},n={responsive:!0,animation:{duration:0},scales:{x:{display:!0},y:{display:!0,beginAtZero:!0}},plugins:{legend:{position:"top"},title:{display:!0,text:"CPU Load"}}};return(0,a.jsxs)("div",{className:"bg-white p-4 border rounded shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["CPU Load: ",t.toFixed(1),"%"]}),(0,a.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"border rounded p-1 text-sm text-gray-900",children:[(0,a.jsx)("option",{value:"line",children:"Line"}),(0,a.jsx)("option",{value:"bar",children:"Bar"})]})]}),"line"===c?(0,a.jsx)(l.N1,{data:r,options:n}):(0,a.jsx)(l.yP,{data:r,options:n}),(0,a.jsxs)("p",{className:"text-sm mt-2 text-gray-800",children:["Last ",60," samples"]})]})}{let e=s.map(e=>e.memFree),t=s.map(e=>e.percentFree),r=s[s.length-1],n=r?r.totalMemMB:0,i=r?r.percentFree:0,o=r?r.memFree:0,m={labels:x,datasets:[{label:"Free Memory (MB)",data:e,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",yAxisID:"yMemory",fill:"line"===c,tension:"line"===c?.3:0},{label:"Percent Free (%)",data:t,backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",yAxisID:"yPercent",fill:"line"===c,tension:"line"===c?.3:0}]},u={responsive:!0,animation:{duration:0},scales:{x:{display:!0},yMemory:{display:!0,beginAtZero:!0,type:"linear",position:"left"},yPercent:{display:!0,beginAtZero:!0,type:"linear",position:"right",grid:{drawOnChartArea:!1}}},plugins:{legend:{position:"top"},title:{display:!0,text:"Free Memory / % Free (Total: ".concat(n," MB)")}}};return(0,a.jsxs)("div",{className:"bg-white p-4 border rounded shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Memory Usage"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Free: ",o.toFixed(0)," MB (",i.toFixed(1),"%)"]})]}),(0,a.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"border rounded p-1 text-sm text-gray-900",children:[(0,a.jsx)("option",{value:"line",children:"Line"}),(0,a.jsx)("option",{value:"bar",children:"Bar"})]})]}),"line"===c?(0,a.jsx)(l.N1,{data:m,options:{...u,scales:{x:{display:!0},y:{display:!0,beginAtZero:!0,type:"linear",position:"left"},y2:{display:!0,beginAtZero:!0,type:"linear",position:"right",grid:{drawOnChartArea:!1}}}}}):(0,a.jsx)(l.yP,{data:m,options:{...u,scales:{x:{display:!0},y:{display:!0,beginAtZero:!0,type:"linear",position:"left"},y2:{display:!0,beginAtZero:!0,type:"linear",position:"right",grid:{drawOnChartArea:!1}}}}}),(0,a.jsxs)("p",{className:"text-sm mt-2 text-gray-800",children:["Last ",60," samples"]})]})}}function m(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null);return((0,r.useEffect)(()=>{fetch("/api/server-info").then(e=>e.json()).then(e=>{e.error?l(e.error):t(e)}).catch(()=>l("Failed to load server info"))},[]),s)?(0,a.jsxs)("div",{className:"text-red-600",children:["Error: ",s]}):e?(0,a.jsxs)("div",{className:"bg-white p-4 border rounded shadow text-gray-900",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Server Information"}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"OS:"})," ",e.osName," ",e.osVersion]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"CPU:"})," ",e.cpuModel," (",e.cpus," cores)"]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Total Memory:"})," ",e.totalMemMB," MB"]}),(0,a.jsx)("h3",{className:"font-semibold mt-4 mb-2",children:"Network Interfaces:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:e.interfaces.map(e=>(0,a.jsxs)("li",{children:[e.name," - ",e.speed||"Unknown speed"]},e.name))})]}):(0,a.jsx)("div",{className:"text-gray-700",children:"Loading server info..."})}function u(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[n,i]=(0,r.useState)({});if((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/devices"),t=await e.json(),s={};t.devices.forEach(e=>{s[e.name]=e.label||e.name}),s.ifb0="InBound",i(s)}catch(e){console.error("Failed to fetch device labels:",e)}})()},[]),(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/status"),s=await e.json();s.error?l(s.error):t(s)}catch(e){console.error("Failed to fetch status:",e),l("Failed to fetch status")}};e();let s=setInterval(e,15e3);return()=>clearInterval(s)},[]),s)return(0,a.jsxs)("div",{className:"text-red-600",children:["Error: ",s]});if(!e)return(0,a.jsx)("div",{className:"text-gray-700",children:"Loading status..."});let o=e=>(e/1048576).toFixed(2);return(0,a.jsxs)("div",{className:"p-0 pt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"CAKE Statistics"}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(e.interfaces).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-medium text-gray-800",children:n[t]||t}),(0,a.jsxs)("div",{className:"grid grid-cols-3  mt-0.5 text-s",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"".concat(s.new_drops>0?"text-red-600":"text-gray-900"),children:[s.new_drops.toLocaleString()," drops"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"".concat(s.backlog>0?"text-yellow-600":"text-gray-900"),children:[s.backlog.toLocaleString()," backlog"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:"text-gray-900",children:[o(s.memory),"MB"]})})]})]},t)})})]})}function g(){let[e,t]=(0,r.useState)(null);if((0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/ping-status"),s=await e.json();t(s)}catch(e){console.error("Failed to fetch ping data:",e)}};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[]),!e)return null;let s={labels:Array.from({length:22},(e,t)=>t+1),datasets:Object.entries(e.servers).map(e=>{let[t,s]=e;return{label:t,data:JSON.parse(s.samples),borderColor:"PRIMARY"===t?"rgb(75, 192, 192)":"rgb(255, 99, 132)",backgroundColor:"PRIMARY"===t?"rgba(75, 192, 192, 0.5)":"rgba(255, 99, 132, 0.5)",tension:.3}})};return(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,a.jsx)(l.N1,{data:s,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Connection Ping Times"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Ping (ms)"}}}}})})}function h(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/ping-status"),s=await e.json();s.error?l(s.error):t(s)}catch(e){console.error(e),l("Failed to fetch ping data")}};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[]),s)?(0,a.jsxs)("div",{className:"text-red-600",children:["Error: ",s]}):e?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.servers).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:[t," Connection Status"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:"Current Ping"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[s.ping_delay_ms,"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:"Rolling Average"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[s.rolling_avg_ms,"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:"Highest Ping"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[s.highest_ping,"ms"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:"Lowest Ping"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[s.lowest_ping,"ms"]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:"Packet Loss"}),(0,a.jsx)("p",{className:"font-bold ".concat(s.packet_loss?"text-red-600":"text-green-600"),children:s.packet_loss?"Yes":"No"})]})]})]},t)})}):(0,a.jsx)("div",{className:"text-gray-700",children:"Loading ping data..."})}function p(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)("idle"),[n,i]=(0,r.useState)(null),o=async()=>{try{l("running"),i(null);let e=new EventSource("/api/speedtest");e.onmessage=s=>{let a=JSON.parse(s.data);if(a.status&&l(a.status),a.result&&(t(a.result),e.close(),l("complete")),a.error)throw Error(a.error)},e.onerror=()=>{"running"===s&&(e.close(),i("Connection lost - check server logs"),l("error"))}}catch(e){i(e instanceof Error?e.message:"Failed to run speed test"),l("error")}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Network Speed Test"}),(0,a.jsx)("button",{onClick:o,disabled:"idle"!==s&&"complete"!==s&&"error"!==s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:"idle"===s||"complete"===s||"error"===s?"Run Test":"Running Test..."})]}),"idle"!==s&&"complete"!==s&&"error"!==s&&(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:s}),n&&(0,a.jsxs)("div",{className:"text-sm text-red-600 mb-4",children:["Error: ",n]}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Download"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.download.toFixed(2)," Mbps"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Jitter: ",e.jitterDown,"ms"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Upload"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.upload.toFixed(2)," Mbps"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Jitter: ",e.jitterUp,"ms"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Latency"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.idleLatency.toFixed(2)," ms"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Jitter: ",e.jitterIdle,"ms"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Packet Loss"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.packetLoss.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"col-span-2 bg-gray-50 p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Server"}),(0,a.jsx)("p",{className:"text-gray-900",children:e.serverName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"ISP"}),(0,a.jsx)("p",{className:"text-gray-900",children:e.isp})]})]}),e.resultUrl&&(0,a.jsx)("a",{href:e.resultUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs mt-2 inline-block",children:"View Details →"})]})]})]})}function b(){let[e,t]=(0,r.useState)({PRIMARY_EGRESS_BANDWIDTH:{value:"",unit:"mbit"},PRIMARY_INGRESS_BANDWIDTH:{value:"",unit:"mbit"},SECONDARY_EGRESS_BANDWIDTH:{value:"",unit:"mbit"},SECONDARY_INGRESS_BANDWIDTH:{value:"",unit:"mbit"}}),[s,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{o(),c();let e=setInterval(c,5e3);return()=>clearInterval(e)},[]);let o=async()=>{try{let e=await fetch("/api/network-config"),s=await e.json();console.log("Fetched config:",s),t(s)}catch(e){console.error("Failed to fetch network config:",e)}},c=async()=>{try{let e=await fetch("/api/connection-status"),t=await e.json();t.active&&i(t.active)}catch(e){console.error("Failed to fetch connection status:",e)}},d=(e,s)=>{t(t=>({...t,[e]:{...t[e]||{unit:"mbit"},value:s}}))},x=(e,s)=>{t(t=>({...t,[e]:{...t[e]||{value:""},unit:s}}))},m=async()=>{l(!0);try{await fetch("/api/network-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),await o()}catch(e){console.error("Failed to apply network config:",e)}l(!1)},u=async e=>{l(!0);try{await fetch("/api/switch-gateway",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e})})}catch(e){console.error("Failed to switch gateway:",e)}l(!1)};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Connection Tuning"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Primary"}),"PRIMARY"===n&&(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"active"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Incoming Bandwidth"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.PRIMARY_INGRESS_BANDWIDTH.value,onChange:e=>d("PRIMARY_INGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900"}),(0,a.jsxs)("select",{value:e.PRIMARY_INGRESS_BANDWIDTH.unit,onChange:e=>x("PRIMARY_INGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:"mbit",children:"Mbit"}),(0,a.jsx)("option",{value:"gbit",children:"Gbit"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Outgoing Bandwidth"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.PRIMARY_EGRESS_BANDWIDTH.value,onChange:e=>d("PRIMARY_EGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900"}),(0,a.jsxs)("select",{value:e.PRIMARY_EGRESS_BANDWIDTH.unit,onChange:e=>x("PRIMARY_EGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:"mbit",children:"Mbit"}),(0,a.jsx)("option",{value:"gbit",children:"Gbit"})]})]})]}),(0,a.jsx)("button",{onClick:()=>u("PRIMARY"),disabled:s,className:"w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50",children:"Switch to Primary"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Secondary"}),"SECONDARY"===n&&(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"active"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Incoming Bandwidth"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.SECONDARY_INGRESS_BANDWIDTH.value,onChange:e=>d("SECONDARY_INGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900"}),(0,a.jsxs)("select",{value:e.SECONDARY_INGRESS_BANDWIDTH.unit,onChange:e=>x("SECONDARY_INGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:"mbit",children:"Mbit"}),(0,a.jsx)("option",{value:"gbit",children:"Gbit"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Outgoing Bandwidth"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:e.SECONDARY_EGRESS_BANDWIDTH.value,onChange:e=>d("SECONDARY_EGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900"}),(0,a.jsxs)("select",{value:e.SECONDARY_EGRESS_BANDWIDTH.unit,onChange:e=>x("SECONDARY_EGRESS_BANDWIDTH",e.target.value),className:"mt-1 block w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-gray-900",children:[(0,a.jsx)("option",{value:"mbit",children:"Mbit"}),(0,a.jsx)("option",{value:"gbit",children:"Gbit"})]})]})]}),(0,a.jsx)("button",{onClick:()=>u("SECONDARY"),disabled:s,className:"w-full bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 disabled:opacity-50",children:"Switch to Secondary"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:m,disabled:s,className:"w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50",children:"Apply Changes"})}),(0,a.jsx)("div",{className:"mt-4 text-sm text-gray-900",children:(0,a.jsxs)("p",{children:["Note: Please run a speed test at"," ",(0,a.jsx)("a",{href:"https://www.waveform.com/tools/bufferbloat",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Waveform Bufferbloat Test"})," ","and set bandwidth to 85% of results."]})})]})}function y(){let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/devices"),s=await e.json();console.log("Frontend received devices:",s.devices);let a=s.devices.sort((e,t)=>"primary"===e.type?-1:"primary"===t.type?1:"secondary"===e.type?-1:"secondary"===t.type?1:e.name.localeCompare(t.name));console.log("Reordered devices:",a),t(a)}catch(e){console.error("Failed to fetch network devices:",e),t([])}})()},[]),(0,a.jsx)(o,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-8 text-center text-gray-900",children:"Network & System Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,a.jsx)(m,{}),(0,a.jsx)(u,{})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,a.jsx)(g,{}),(0,a.jsx)(h,{})]}),(0,a.jsx)(p,{}),(0,a.jsx)(b,{}),e.map(e=>(0,a.jsx)(d,{device:e.name,label:e.label,type:e.type,egressBandwidth:e.egressBandwidth,ingressBandwidth:e.ingressBandwidth},e.name)),(0,a.jsx)(x,{metric:"cpu"}),(0,a.jsx)(x,{metric:"mem"})]})]})})}n.t1.register(n.PP,n.kc,n.FN,n.No,n.E8,n.hE,n.m_,n.s$),n.t1.register(n.PP,n.kc,n.FN,n.No,n.E8,n.hE,n.m_,n.s$),n.t1.register(n.PP,n.kc,n.FN,n.No,n.hE,n.m_,n.s$)}},e=>{var t=t=>e(e.s=t);e.O(0,[647,759,441,517,358],()=>t(3014)),_N_E=e.O()}]);