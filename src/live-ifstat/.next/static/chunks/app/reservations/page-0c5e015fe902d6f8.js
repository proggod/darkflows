(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{3390:(e,s,r)=>{Promise.resolve().then(r.bind(r,6902))},6902:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>v});var a=r(5155),t=r(2115),d=r(894),i=r(2282),n=r(6331),l=r(8416),o=r(6417),c=r(7753),h=r(1760),x=r(6214),p=r(450),m=r(7740),u=r(6581),f=r(6046);function v(){let e=(0,f.useRouter)(),[s,r]=(0,t.useState)([]),[v,y]=(0,t.useState)(!1),[j,g]=(0,t.useState)({"ip-address":"","hw-address":"",hostname:""}),[w,A]=(0,t.useState)("");(0,t.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/reservations"),s=await e.json();r(s)}catch(e){console.error("Error fetching reservations:",e),A("Failed to load reservations")}},X=async e=>{if(confirm("Are you sure you want to delete this reservation?"))try{(await fetch("/api/reservations",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e["ip-address"],mac:e["hw-address"]})})).ok?N():A("Failed to delete reservation")}catch(e){console.error("Error deleting reservation:",e),A("Error deleting reservation")}},b=async()=>{try{if(!j["ip-address"]||!j["hw-address"]){A("IP Address and MAC Address are required");return}if(!/^(\d{1,3}\.){3}\d{1,3}$/.test(j["ip-address"])){A("Invalid IP address format");return}if(!/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/.test(j["hw-address"])){A("Invalid MAC address format (use XX:XX:XX:XX:XX:XX)");return}(await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok?(y(!1),g({"ip-address":"","hw-address":"",hostname:""}),N()):A("Failed to add reservation")}catch(e){console.error("Error adding reservation:",e),A("Error adding reservation")}};return(0,a.jsx)("div",{className:"min-h-screen bg-white flex flex-col font-sans",children:(0,a.jsxs)("div",{className:"flex-grow px-4 sm:px-6 lg:px-8 py-6 max-w-7xl mx-auto w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d.A,{onClick:()=>e.push("/leases"),"aria-label":"back",children:(0,a.jsx)(u.A,{})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"DHCP Reservations"})]}),(0,a.jsx)(i.A,{variant:"contained",color:"primary",startIcon:(0,a.jsx)(m.A,{}),onClick:()=>y(!0),children:"Add Reservation"})]}),w&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:w}),(0,a.jsx)("div",{className:"overflow-x-auto shadow-sm rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"IP Address"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"MAC Address"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"Hostname"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:e["ip-address"]}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:e["hw-address"]}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:e.hostname||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:(0,a.jsx)(n.A,{title:"Delete Reservation",children:(0,a.jsx)(d.A,{onClick:()=>X(e),color:"error",size:"small",children:(0,a.jsx)(p.A,{})})})})]},e["ip-address"]))})]})}),(0,a.jsxs)(l.A,{open:v,onClose:()=>y(!1),children:[(0,a.jsx)(o.A,{children:"Add New Reservation"}),(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)(h.A,{fullWidth:!0,label:"IP Address",value:j["ip-address"],onChange:e=>g({...j,"ip-address":e.target.value}),placeholder:"192.168.1.xxx"}),(0,a.jsx)(h.A,{fullWidth:!0,label:"MAC Address",value:j["hw-address"],onChange:e=>g({...j,"hw-address":e.target.value}),placeholder:"XX:XX:XX:XX:XX:XX"}),(0,a.jsx)(h.A,{fullWidth:!0,label:"Hostname",value:j.hostname,onChange:e=>g({...j,hostname:e.target.value}),placeholder:"device-name"})]})}),(0,a.jsxs)(x.A,{children:[(0,a.jsx)(i.A,{onClick:()=>y(!1),children:"Cancel"}),(0,a.jsx)(i.A,{onClick:b,variant:"contained",color:"primary",children:"Add"})]})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[191,141,871,86,441,517,358],()=>s(3390)),_N_E=e.O()}]);